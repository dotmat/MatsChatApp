<!--

=========================================================
* Argon Dashboard - v1.1.1
=========================================================

* Product Page: https://www.creative-tim.com/product/argon-dashboard
* Copyright 2019 Creative Tim (https://www.creative-tim.com)
* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard/blob/master/LICENSE.md)

* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=no">
  <meta name="TokBoxAPIKey" content="{{tokBoxAPIKey}}">
  <title>{{appName}}</title>
  <!-- App Credentials from Server-->
  <meta name="appName" content="{{appName}}">
  <!-- Favicon -->
  <link href="{{favIconURL}}" rel="icon" type="image/png">
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
  <!-- Icons -->
  <link href="/css/nucleo-icons.css" rel="stylesheet" />
  <link href="/css/font-awesome.css" rel="stylesheet" />
  <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
  <!-- CSS Files -->
  <link href="/css/argon-dashboard.css?v=1.1.1" rel="stylesheet" />
</head>

<body class="">
  <nav class="navbar navbar-vertical fixed-left navbar-expand-md navbar-light bg-white" id="sidenav-main">
    <div class="container-fluid">
      <!-- Toggler -->
      <button id="navbar-main-toggler-button" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#sidenav-collapse-main" aria-controls="sidenav-main" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <!-- Brand -->
      <a class="navbar-brand pt-0" href="../chat">
        <img src="{{appLogoURL}}" class="navbar-brand-img" alt="...">
      </a>
      <!-- User -->
      <ul class="nav align-items-center d-md-none">
        <!-- <li class="nav-item dropdown">
          <a class="nav-link nav-link-icon" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="ni ni-bell-55"></i>
          </a>
          <div class="dropdown-menu dropdown-menu-arrow dropdown-menu-right" aria-labelledby="navbar-default_dropdown_1">
            <a class="dropdown-item" href="#">Action</a>
            <a class="dropdown-item" href="#">Another action</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">Something else here</a>
          </div>
        </li> -->
        <li class="nav-item dropdown">
          <a class="nav-link" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <div class="media align-items-center">
              <span class="avatar avatar-sm rounded-circle">
                <img alt="Image Profile" id="userProfileURL0" src="">
              </span>
            </div>
          </a>
          <!-- User Menu Dropdown Container -->
          <div id="userDropDownMenu0" class="dropdown-menu dropdown-menu-arrow dropdown-menu-right">
            <div class=" dropdown-header noti-title">
              <h6 class="text-overflow m-0">Welcome!</h6>
            </div>
            <!-- <a href="#" class="dropdown-item"><i class="ni ni-single-02"></i><span>My profile</span></a> -->
            <!-- <a href="#" class="dropdown-item"><i class="ni ni-settings-gear-65"></i><span>Settings</span></a> -->
            <!-- <a href="#" class="dropdown-item"><i class="ni ni-calendar-grid-58"></i><span>Activity</span></a> -->
            <a href="/support" target="_blank" class="dropdown-item"><i class="ni ni-support-16"></i><span>Support</span></a>
            <div class="dropdown-divider"></div>
            <a href="#" class="dropdown-item" onclick="chatSPA.logUserOutButton();return false;"><i class="ni ni-user-run"></i><span>Logout</span></a>
          </div>
          <!-- End User Menu Dropdown Container -->
        </li>
      </ul>
      <!-- Collapse -->
      <div class="collapse navbar-collapse" id="sidenav-collapse-main">
        <!-- Collapse header -->
        <div class="navbar-collapse-header d-md-none">
          <div class="row">
            <div class="col-6 collapse-brand">
              <a href="../index.html">
                <img src="{{appLogoURL}}">
              </a>
            </div>
            <div class="col-6 collapse-close">
              <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#sidenav-collapse-main" aria-controls="sidenav-main" aria-expanded="false" aria-label="Toggle sidenav">
                <span></span>
                <span></span>
              </button>
            </div>
          </div>
        </div>
        <!-- Form -->
        <!-- <form class="mt-4 mb-3 d-md-none">
          <div class="input-group input-group-rounded input-group-merge">
            <input type="search" class="form-control form-control-rounded form-control-prepended" placeholder="Search" aria-label="Search">
            <div class="input-group-prepend">
              <div class="input-group-text">
                <span class="fa fa-search"></span>
              </div>
            </div>
          </div>
        </form> -->
        <!-- Navigation -->
        <!-- Heading -->
        <h6 class="navbar-heading text-muted">
          <!-- Chats -->
          <div class="btn-toolbar justify-content-between" role="toolbar" aria-label="Toolbar with button groups">
              <div class="btn-group" role="group" aria-label="First group">
                <button type="button" class="btn btn-link" onclick="chatSPA.showAvailableChannelsButton();return false;" >Chat's</button>
              </div>
              <div class="btn-group" role="group" aria-label="Second group">
                  <button type="button" class="btn btn-link"><i class="fas fa-plus" onclick="chatSPA.makeNewGroupRoomButton();return false;"></i></button>
                </div>
          </div>
      </h6>
        <!-- Chats Navigation -->
        <ul class="navbar-nav">
          <!-- <li class="nav-item"><a class="nav-link " href="#"><i class="ni ni-planet text-blue"></i> Main</a></li> -->
          <li class="nav-item" id="chatSPAPublicChannelsNavList">
              <!-- <button type="button" class="btn btn-link btn-lg btn-block">Block level button</button> -->
              <!-- <div class="btn-group" role="group">
                <button type="button" class="nav-link btn btn-link" onclick="chatSPA.jumpToChannelButton('ChannelID');return false;"><i class="ni ni-planet text-blue"></i> Main</button>
                <button id="btnGroupPublicMain" type="button" class="btn btn-link btn-lg btn-block dropdown-toggle nav-link" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>
                <div class="dropdown-menu" aria-labelledby="btnGroupPublicMain">
                  <button class="dropdown-item" onclick="chatSPA.showUsersInChannelButton('ChannelID');return false;">Users</button>
                  <button class="dropdown-item" onclick="chatSPA.favouriteThisChannelButton('ChannelID');return false;">Favourite</button>
                  <button class="dropdown-item" onclick="chatSPA.leaveThisChannelButton('ChannelID');return false;">Leave</button>
                </div>
              </div> -->
          </li>
        </ul>
        <!-- Divider -->
        <hr class="my-3">
        <!-- Heading -->
        <h6 class="navbar-heading text-muted">
            <!-- DM's -->
            <div class="btn-toolbar justify-content-between" role="toolbar" aria-label="Toolbar with button groups">
                <div id="chatSPAActiveDMsButton" class="btn-group" role="group" aria-label="First group"><button onclick="chatSPA.showActiveDMsButton();return false;" type="button" class="btn btn-link">DM's</button></div>
                <div hidden id="chatSPANewDMButton" class="btn-group" role="group" aria-label="Second group"><button type="button" class="btn btn-link"><i class="fas fa-plus"></i></button></div>
            </div>
        </h6>
        <!-- Navigation -->
        <ul id="chatSPADirectMessageNavList" class="navbar-nav mb-md-3">
          <!-- <li class="nav-item">
                <div class="btn-group" role="group">
                  <button type="button" class="nav-link btn btn-link" onclick="chatSPA.jumpToChannelButton('ChannelID');return false;"><i class="fas fa-user"></i> Bob</button>
                  <button id="btnGroupPublicMain" type="button" class="btn btn-link btn-lg btn-block dropdown-toggle nav-link" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>                    <div class="dropdown-menu" aria-labelledby="btnGroupPublicMain">
                      <button class="dropdown-item" onclick="chatSPA.favouriteThisChannelButton('ChannelID');return false;">Favourite</button>
                      <button class="dropdown-item" onclick="chatSPA.leaveThisChatChannelButton('ChannelID');return false;">Close</button>
                      <button class="dropdown-item" onclick="chatSPA.blockThisChannelButton('ChannelID');return false;">Block</button>
                    </div>
                </div>
            </li> -->

            <!-- <li class="nav-item">
                <div class="btn-group" role="group">
                    <button id="btnGroupPublicMain" type="button" class="btn btn-link btn-lg btn-block dropdown-toggle nav-link" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fas fa-robot"></i> HelpBot</button>
                    <div class="dropdown-menu" aria-labelledby="btnGroupPublicMain">
                      <button class="dropdown-item" onclick="chatSPA.favouriteThisChannelButton('ChannelID');return false;">Favourite</button>
                      <button class="dropdown-item" onclick="chatSPA.leaveThisChatChannelButton('ChannelID');return false;">Close</button>
                      <button class="dropdown-item" onclick="chatSPA.blockThisChannelButton('ChannelID');return false;">Block</button>
                    </div>
                </div>
            </li> -->
            <!-- <li class="nav-item">
                <div class="btn-group" role="group">
                    <button id="btnGroupPublicMain" type="button" class="btn btn-link btn-lg btn-block dropdown-toggle nav-link" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fas fa-user"></i> Bob</button>
                    <div class="dropdown-menu" aria-labelledby="btnGroupPublicMain">
                        <button class="dropdown-item">Favourite</button>
                        <button class="dropdown-item">Close</button>
                        <button class="dropdown-item">Block</button>
                    </div>
                </div>
            </li> -->
        </ul>
      </div>
    </div>
  </nav>
  <div class="main-content">
    <!-- Navbar -->
    <nav class="navbar navbar-top navbar-expand-md navbar-dark" id="navbar-main">
      <div class="container-fluid">
        <!-- Brand -->
        <a class="h4 mb-0 text-white text-uppercase d-none d-lg-inline-block" href="#">Chats</a>
        <!-- Form -->
        <form class="navbar-search navbar-search-dark form-inline mr-3 d-none d-md-flex ml-lg-auto">
          <!-- <div class="form-group mb-0">
            <div class="input-group input-group-alternative">
              <div class="input-group-prepend">
                <span class="input-group-text"><i class="fas fa-search"></i></span>
              </div>
              <input class="form-control" placeholder="Search" type="text">
            </div>
          </div> -->
        </form>
        <!-- User -->
        <ul class="navbar-nav align-items-center d-none d-md-flex">
          <li class="nav-item dropdown">
            <a class="nav-link pr-0" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <div class="media align-items-center">
                <span class="avatar avatar-sm rounded-circle">
                  <img alt="Image Profile URL" id="userProfileURL1" src="">
                </span>
                <div class="media-body ml-2 d-none d-lg-block">
                  <span class="mb-0 text-sm  font-weight-bold" id="userProfileName1"></span>
                </div>
              </div>
            </a>
            <!-- User Menu Dropdown Container -->
          <div id="userDropDownMenu1" class="dropdown-menu dropdown-menu-arrow dropdown-menu-right">
            <div class=" dropdown-header noti-title">
              <h6 class="text-overflow m-0">Welcome!</h6>
            </div>
            <!-- <a href="#" class="dropdown-item"><i class="ni ni-single-02"></i><span>My profile</span></a> -->
            <!-- <a href="#" class="dropdown-item"><i class="ni ni-settings-gear-65"></i><span>Settings</span></a> -->
            <!-- <a href="#" class="dropdown-item"><i class="ni ni-calendar-grid-58"></i><span>Activity</span></a> -->
            <a href="/support" target="_blank" class="dropdown-item"><i class="ni ni-support-16"></i><span>Support</span></a>
            <div class="dropdown-divider"></div>
            <a href="#" class="dropdown-item" onclick="chatSPA.logUserOutButton();return false;"><i class="ni ni-user-run"></i><span>Logout</span></a>
          </div>
          <!-- End User Menu Dropdown Container -->
          </li>
        </ul>
      </div>
    </nav>
    <!-- End Navbar -->
    <!-- Header -->
    <div class="header bg-gradient-primary pb-6 pt-5 pt-md-8">
      <div class="container-fluid">
        <div class="header-body">
          <!-- Card stats -->
        </div>
      </div>
    </div>
    <div class="container-chat mt--7">
      <div id="chatSPAMainViewContainer"></div>
        <!-- End Chat Container -->
      </div>
    </div>
  </div>
  <!-- Show Users In Channel Modal -->
  <div id="showUsersInChannelModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="showUsersInChannelModal" aria-hidden="true"></div>
  <!-- End Show Users In Channel Room Modal -->
  <!-- Show Media Modal -->
<div class="modal fade" id="showMediaModal" tabindex="-1" role="dialog" aria-labelledby="showMediaModal" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <!-- <h5 class="modal-title" id="exampleModalLabel">Modal title</h5> -->
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id="showMediaModalContainer">...</div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
  <!-- End Media Modal -->
  <!-- Alerts and Notifications Modal -->
  <div class="modal fade" id="showAlertOrNoficiationModal" tabindex="-1" role="dialog" aria-labelledby="AlertOrNotificationModal" aria-hidden="true"></div>
  <!-- End Alerts and Notifications Modal -->
  <!--   Core   -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
  <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
  <script src="/js/argon-dashboard.min.js?v=1.1.1"></script>
  <script src="https://cdn.pubnub.com/sdk/javascript/pubnub.4.21.7.js"></script>
  <script>window.jQuery || document.write('<script src="./js/jquery-slim.min.js"><\/script>')</script>
  <script async src='https://www.googletagmanager.com/gtag/js?id={{googleAnalytics}}'></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', '{{googleAnalytics}}');</script>
  <script src="./js/chatSPA.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/8.11.8/sweetalert2.all.js"></script>
  <script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>
  <script src="https://static.opentok.com/v2/js/opentok.js"></script>
  <script src="https://code.bandwidth.com/bandwidth-0.9.4.js"></script>
  
  <!-- MixPanel Analytics -->
  <script>(function(c,a){if(!a.__SV){var b=window;try{var d,m,j,k=b.location,f=k.hash;d=function(a,b){return(m=a.match(RegExp(b+"=([^&]*)")))?m[1]:null};f&&d(f,"state")&&(j=JSON.parse(decodeURIComponent(d(f,"state"))),"mpeditor"===j.action&&(b.sessionStorage.setItem("_mpcehash",f),history.replaceState(j.desiredHash||"",c.title,k.pathname+k.search)))}catch(n){}var l,h;window.mixpanel=a;a._i=[];a.init=function(b,d,g){function c(b,i){var a=i.split(".");2==a.length&&(b=b[a[0]],i=a[1]);b[i]=function(){b.push([i].concat(Array.prototype.slice.call(arguments,
    0)))}}var e=a;"undefined"!==typeof g?e=a[g]=[]:g="mixpanel";e.people=e.people||[];e.toString=function(b){var a="mixpanel";"mixpanel"!==g&&(a+="."+g);b||(a+=" (stub)");return a};e.people.toString=function(){return e.toString(1)+".people (stub)"};l="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" ");
    for(h=0;h<l.length;h++)c(e,l[h]);var f="set set_once union unset remove delete".split(" ");e.get_group=function(){function a(c){b[c]=function(){call2_args=arguments;call2=[c].concat(Array.prototype.slice.call(call2_args,0));e.push([d,call2])}}for(var b={},d=["get_group"].concat(Array.prototype.slice.call(arguments,0)),c=0;c<f.length;c++)a(f[c]);return b};a._i.push([b,d,g])};a.__SV=1.2;b=c.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?
    MIXPANEL_CUSTOM_LIB_URL:"file:"===c.location.protocol&&"//cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js";d=c.getElementsByTagName("script")[0];d.parentNode.insertBefore(b,d)}})(document,window.mixpanel||[]);
    mixpanel.init("{{mixpanelToken}}")</script>
  <!--   Optional JS   -->
  <!-- Twilio Client JS -->
  <script type="text/javascript" src="https://media.twiliocdn.com/sdk/js/client/v1.9/twilio.min.js"></script>
  <!-- Nexmo Client JS -->
  <script src="https://cdn.jsdelivr.net/npm/nexmo-client@6.0.1/dist/nexmoClient.js"></script>
  <!--   Argon JS   -->
  <!-- <script src="./js/argon-dashboard.min.js?v=1.1.0"></script> -->
  <script src="https://cdn.pubnub.com/sdk/javascript/pubnub.4.27.3.min.js"></script>
  <!-- <script src="https://judelicio.us/initial.js/js/initial.min.js"></script> -->
  <script src="/js/initial.min.js"></script>
  <script>
  // Launch the Login SPA
  $(document).ready(function(){
      chatSPA.launcher();
      //if (Notification.permission !== "granted"){Notification.requestPermission();};
  });
  </script>
  <script>
    // Text input handlers
    // $("#chatSPA-textInput").keyup(function(event) {
    //   if (event.keyCode === 13) {
    //     // Trigger Text input Button
    //     chatSPA.handleTextInput();
    //   }
    // });
    // Input handler for login modal
    $("#chatSPA-textModalUsernameInput").keyup(function(event) {
      if (event.keyCode === 13) {
        chatSPA.handleInputtedUsernameFromModal();
      };
    });

    $(document).on('input', '#pollQuestion', function() {
      //console.log($(this).val());
      //console.log($(this).attr("data-poll"));
      // $('#slider_value').html( $(this).val() );
      var pollID = $(this).attr("data-poll");
      //$("#pollAnswer-"+$(this).attr("data-poll")).text($(this).val());
      $("#pollAnswer-"+pollID).text($(this).val());
      // Send the answer to PubNub via the ChatMat SPA
      const messagePayload = {
          "type":"PollAnswer",
          "messageBody": $(this).val(),
          "fromUser":localStorage.getItem('username')
      };
      const publishPayload = {channel : 'chatSPA-PollAnswer.'+pollID,message: messagePayload};
      // Send the payload to PubNub
      chatSPA.pubnubClient.publish(publishPayload, function(status, response) {
          //console.log(status, response);
      })
    });

  </script>
</body>

</html>